extends layout.jade

block content
  style.
    .log_container pre{
      max-height: 400px;
    }
    .log_container .drag-handle{
      height: 12px;
      margin-top:-2px;
      margin-bottom:-2px;
      text-align: center;
      cursor: ns-resize;
      color:#ddd;
    }
    .log_container .drag-handle:hover{
      background-color: #ddd;
      color:#fff;
    }
    .log_container .drag-handle .glyphicon{
      line-height: 5px;
      top:-2px;
    }
    .highlight{
      color:red;
      background-color: yellow;
    }
    .keywords-row{
    
    }
    .keywords-row h4{
      margin:0;
    }
    .keywords-row .form-control{
      height:22px;
      padding-top:0;
      padding-bottom:0;
    }
  .navbar
    .container-fluid
      // Brand and toggle get grouped for better mobile display
      .navbar-header
        a.navbar-brand(href='#') log tailer
      .collapse.navbar-collapse
        .btn-group
          a.btn.btn-default.navbar-btn(data-bind="click:add_view")
            i.glyphicon.glyphicon-plus
            | add view


  .container-fluid
    +ko("foreach : log_views")
      .row
        .col-xs-4
          input.form-control(type="text",data-bind="value : name")
        .col-xs-8
          .input-group
            input.form-control(type="text",data-bind="value : pathname")
            .input-group-btn
              span.btn.btn-default(data-bind="click: function(){ watching(!watching()) }")
                i.glyphicon(data-bind="css : {\
                                                  'glyphicon-play' : !watching(),\
                                                  'glyphicon-stop' : watching(),\
                                              }")

              span.btn.btn-default(data-bind="click: clean")
                i.glyphicon.glyphicon-trash

              span.btn.btn-default(data-bind="click: $parent.remove_view")
                i.glyphicon.glyphicon-remove
      p
      .row.keywords-row
        .col-xs-12
          h4.pull-left
            | highlights : 
            +ko("foreach : keywords")
              span.btn.btn-primary.btn-xs
                +ko("text:$data")
                | 
                i.glyphicon.glyphicon-remove(data-bind="click: $parent.remove_keywork")
              |  
          .col-xs-3
            .input-group
              input.form-control(data-bind="value:keyword_to_add")
              .input-group-btn
                span.btn.btn-default.btn-xs(data-bind="click:add_keyword")
                  .glyphicon.glyphicon-plus

      p
      .row
        .col-xs-12
          .log_container(data-bind="log : log")
            pre
            .drag-handle
              i.glyphicon.glyphicon-minus
              i.glyphicon.glyphicon-minus
              i.glyphicon.glyphicon-minus
      hr

append js
  script.
    var views = !{JSON.stringify(views) || []};
  script(src="/javascripts/app.js")
